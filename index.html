<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>작물 병해 분석 & 농약 추천</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="container">
      <h1>작물 병해 분석 & 농약 추천</h1>
      <p class="muted">이미지를 업로드하면 모델이 병해를 분류하고, CSV 데이터를 기반으로 권장 농약을 제안합니다.</p>
    </header>

    <main class="container">
      <section class="card">
        <h2>이미지 업로드</h2>
        <label for="fileInput" style="cursor: pointer; display: inline-block;">
          <input id="fileInput" type="file" accept="image/*" aria-label="작물 병해 이미지 업로드" />
        </label>
        <div class="preview">
          <img id="preview" alt="업로드 미리보기" />
        </div>
        <div id="status" class="status" role="status" aria-live="polite"></div>
      </section>

      <section class="card">
        <h2>분석 결과</h2>
        <div id="prediction" class="prediction" role="region" aria-label="예측 결과"></div>
        <ul id="topK" class="topk" aria-label="상위 예측 목록"></ul>
      </section>

      <section class="card">
        <div class="row">
          <h2>권장 농약</h2>
          <small class="muted" style="margin-left: .5rem">데이터: Pepper_protection.csv</small>
        </div>
        <div id="recoInfo" class="muted small"></div>
        <div class="table-wrap">
          <table id="recoTable">
            <thead>
              <tr id="recoHeader"></tr>
            </thead>
            <tbody id="recoBody"></tbody>
          </table>
        </div>
      </section>

      <section class="card warn">
        <strong>주의</strong>
        <ul>
          <li>이 결과는 참고용 시연입니다. 실제 농약 사용 시 반드시 라벨을 확인하고 지역 농업기술센터 등 전문가 지침을 따르세요.</li>
          <li>모델 파일(model.json/metadata.json/weights*.bin)이 동일 경로에 있어야 로드됩니다. 외부 호스팅을 쓸 경우 app.js의 MODEL_URL을 수정하세요.</li>
          <li>Pepper_protection.csv는 UTF-8 인코딩으로 저장되어야 합니다.</li>
        </ul>
      </section>
    </main>

    <!-- Load libraries before app.js -->
    <script src="libs/tf.min.js"></script>
    <script src="libs/teachablemachine-image.min.js"></script>
    <script src="libs/papaparse.min.js"></script>
    <script src="app.js"></script>
  </body>
  </html>

